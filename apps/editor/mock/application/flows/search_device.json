{
  "$schema": "../../../../../libs/schema/src/json-schemas/flow.schema.json",
  "name": "search_device",
  "description": "Search Devices",
  "input": {
    "type": "object",
    "required": ["vehicleNumber"],
    "properties": {
      "taskId": {
        "type": "string"
      },
      "vehicleId": {
        "type": "string"
      }
    }
  },
  "output": {},
  "startEventName": "repeat",
  "events": {
    "repeat": {
      "type": "Repeat",
      "next": "choice",
      "repeatCount": "3",
      "startEventName": "repeatFirst"
    },
    "repeatFirst": {
      "type": "Success",
      "output": "3"
    },
    "choice": {
      "type": "Choice",
      "next": "defaultReturn",
      "conditions": [
        {
          "condition": "$.parameter.vehicleNumber === 3",
          "next": "choiceFirst"
        },
        {
          "condition": "$.parameter.vehicleNumber === 5",
          "next": "choiceSecond"
        }
      ]
    },
    "choiceFirst": {
      "type": "Success",
      "output": "'choiceFirst'"
    },
    "choiceSecond": {
      "type": "Store",
      "key": "vehicle",
      "value": "3",
      "next": "parallel"
    },
    "parallel": {
      "type": "Parallel",
      "next": "defaultReturn",
      "branches": [
        {
          "startEventName": "parallelFirst"
        },
        {
          "startEventName": "parallelSecond"
        }
      ]
    },
    "parallelFirst": {
      "type": "SourceQuery",
      "atomName": "devices",
      "next": "",
      "query": {}
    },
    "parallelSecond": {
      "type": "SourceQuery",
      "atomName": "devices",
      "next": "",
      "query": {}
    },
    "defaultReturn": {
      "type": "Success",
      "output": "'defaultReturn'"
    }
  }
}
